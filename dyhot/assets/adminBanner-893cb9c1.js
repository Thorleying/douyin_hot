import{g as k,d as w,i as v}from"./Banner-e33a6e7a.js";import{a as C}from"./request-571d1387.js";import{r as F,t as I,m,_ as E,a as f,o as r,c as l,n as h,v as g,b,g as y,w as c,F as B,h as x,i,d,p as S,f as q}from"./index-4944d5d0.js";const N={name:"adminBanner",setup(){let e=F({banner:[],fileData:null,isDel:!1});const o=async()=>{const{data:a}=await k();e.banner=a},u=a=>{},t=()=>{e.isDel=!e.isDel},p=async a=>{if(confirm("是否删除这个")){const{data:n}=await w(a.Id);console.log(n,"输出删除的状态"),n===1&&(m.success("删除成功"),await o())}else alert("取消成功")};o();const _=a=>{if(e.banner.length===8)m.error("上传失败，最多只能上传8张");else{console.log(a.file),console.log("https://thorleying.work/bbq/upload/"+a.file.name);let n=new FormData;n.append("file",a.file),C({url:"https://thorleying.work/bbq/uploadImg.php",method:"post",data:n}).then(async s=>{console.log(s.data),await v(`https://thorleying.work/bbq/upload/${a.file.name}`),await o()})}};return{getBannerData:o,consoleData:u,...I(e),openDelete:t,delBanner:p,afterRead:_}}};const D=e=>(S("data-v-dec46b07"),e=e(),q(),e),R=D(()=>d("h2",null,"轮播图库",-1)),V=D(()=>d("br",null,null,-1)),A=["src"];function $(e,o,u,t,p,_){const a=f("van-uploader"),n=f("a-button");return r(),l(B,null,[R,h(b(a,{"after-read":t.afterRead},null,8,["after-read"]),[[g,e.isDel]]),e.isDel?(r(),y(n,{key:0,type:"primary",danger:"",onClick:t.openDelete},{default:c(()=>[i("点击取消删除")]),_:1},8,["onClick"])):(r(),y(n,{key:1,type:"primary",onClick:t.openDelete},{default:c(()=>[i("点击管理图片")]),_:1},8,["onClick"])),V,(r(!0),l(B,null,x(e.banner,s=>(r(),l("div",{class:"banner",key:s.Id},[d("img",{src:s.img,alt:"",style:{width:"100%",height:"140px"}},null,8,A),h(b(n,{type:"primary",danger:"",class:"delete",onClick:L=>t.delBanner(s)},{default:c(()=>[i("删除")]),_:2},1032,["onClick"]),[[g,e.isDel]])]))),128))],64)}const G=E(N,[["render",$],["__scopeId","data-v-dec46b07"]]);export{G as default};
